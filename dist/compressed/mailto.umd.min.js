!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.mailtoLink=i():t.mailtoLink=i()}(window,function(){return function(t){var i={};function n(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=0)}([function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=function(t){return t.substring(0,t.search(/\S/))},r=function(t){return t.search(/\s+$/)>-1?t.substring(t.search(/\s+$/),t.length):""},s=function(t){return"\n    <"+options.wrapEl+' class="'+options.className+'">\n      '+t+options.append+"\n    </"+options.wrapEl+">"},h=function(t,i){var n=t.trim().split(" ");if(n.length<i.wordCount)return t;var e=n.splice(n.length-i.wordCount,i.wordCount),s=o(t)+n.join(" "),h=e.join(" ")+r(t);return s+"\n    <"+i.wrapEl+' class="'+i.className+'">\n      '+h+i.append+"\n    </"+i.wrapEl+">"},l=function(){function t(i,n){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=i,this.origText=this.el.textContent,this.childNodes=this.el.children,this.options=Object.assign({},{wordCount:2,wrapEl:"span",className:"u-nowrap",append:""},n),this.options.wordCount=parseInt(this.options.wordCount,10),isNaN(this.options.wordCount)&&(this.options.wordCount=2),this.options.append.length&&(this.options.wordCount-=1),0!==this.origText.length&&(0===this.childNodes.length?(this.el.innerHTML=h(this.origText,this.options),!1):void wrapRichText())}return e(t,[{key:"updateChildNodeVars",value:function(){this.childHtml=this.childEl.outerHTML,this.currentChildSplit=this.el.innerHTML.split(this.childHtml),this.textBeforeChild=this.currentChildSplit[0],this.textAfterChild=this.currentChildSplit[1]||"",this.markupIndex=this.textAfterChild.indexOf("<"),this.plainText=this.markupIndex>-1?this.textAfterChild.substring(0,this.markupIndex):this.textAfterChild,this.previousString=this.markupIndex>-1?this.textAfterChild.substring(markupIndex):"",this.childWordCount=this.childEl.textContent.length?this.childEl.textContent.trim().split(" ").length:1,this.plainTextWords=this.plainText.trim().length?this.plainText.trim().split(" "):null,this.plainTextWordCount=null!==this.plainTextWords?this.plainTextWords.length:0,this.partialWord="",this.plainTextWordCount>0&&0===this.plainText.search(/\S/)&&(this.partialWord=this.plainTextWords.shift(),this.plainTextWordCount--)}},{key:"formatChildOnly",value:function(){if(this.childWordCount+this.previousWordCount>=this.options.wordCount){if(0===this.previousWordCount)return this.childEl.innerHTML=h(this.childEl.textContent,this.options),!1;if(this.childWordCount+this.previousWordCount===this.options.wordCount)return this.el.innerHTML=this.textBeforeChild+s(this.childHtml+this.textAfterChild),!1;if(this.childWordCount+this.previousWordCount>this.options.wordCount)return console.warn("Can’t safely prevent orphans on this element \n",el),!1}else this.previousWordCount+=this.childWordCount}},{key:"formatTextBeforeFirstChild",value:function(){var t=this.el.innerHTML,i=t.indexOf("<");this.textBeforeChild=i>-1?t.substring(0,i):t;var n=i>-1?t.substring(i):"";if(textBeforeChild.trim().length>0){var e=this.textBeforeChild.trim().split(" ");if(e.length+this.previousWordCount===this.options.wordCount)return this.el.classList.add(this.options.className),!1;if(e.length+this.previousWordCount>=this.options.wordCount){var h=this.options.wordCount-this.previousWordCount,l=o(textBeforeChild)+e.splice(0,e.length-h).join(" "),u=e.join(" ")+r(textBeforeChild);return this.el.innerHTML=l+s(u+n),!1}}}},{key:"wrapRichText",value:function(){this.previousWordCount=0;for(var t=this.childNodes.length;t>0;t--)if(this.childEl=this.childNodes[t-1],this.updateChildNodeVars(),0===this.plainTextWordCount)this.formatChildOnly();else{if(this.plainTextWordCount+this.previousWordCount===this.options.wordCount)return this.el.innerHTML=this.textBeforeChild+this.childHtml+s(this.plainText+this.previousString),!1;if(this.plainTextWordCount+this.previousWordCount>this.options.wordCount){var i=this.options.wordCount-this.previousWordCount,n=o(this.plainText)+this.plainTextWords.splice(0,this.plainTextWordCount-i).join(" "),e=this.plainTextWords.join(" ")+r(this.plainText);return this.el.innerHTML=this.textBeforeChild+this.childHtml+n+s(e+this.previousString),!1}if(this.childWordCount+this.plainTextWordCount+this.previousWordCount===this.options.wordCount)return this.el.innerHTML=this.textBeforeChild+s(this.childHtml+this.plainText+this.previousString),!1;if(this.childWordCount+this.plainTextWordCount+this.previousWordCount>this.options.wordCount)return console.warn("Can’t safely prevent orphans on this element \n",el),!1;this.previousWordCount+=this.childWordCount+this.plainTextWordCount}this.formatTextBeforeFirstChild()}}]),t}();i.default=l}])});